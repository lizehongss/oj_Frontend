webpackJsonp([0],{"+3F9":function(t,e){},"04VD":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Dd8w"),o=n.n(s),a=n("woOf"),r=n.n(a),i=n("8Q2T"),c=n("NYxO"),l=n("oAV5"),u=n("26Oo"),d=n("2hfY"),h=n("FN8c"),m={name:"contest-list",components:{Pagination:u.a},data:function(){return{page:1,query:{status:"",keyword:"",rule_type:""},limit:8,total:0,rows:"",contests:[],CONTEST_STATUS_REVERSE:h.b,cur_contest_id:""}},beforeRouteEnter:function(t,e,n){i.a.getContestList(0,8).then(function(t){n(function(e){e.contests=t.data.data.results,e.total=t.data.data.total})},function(t){n()})},methods:{init:function(){var t=this.$route.query;this.query.status=t.status||"",this.query.rule_type=t.rule_type||"",this.query.keyword=t.keyword||"",this.page=parseInt(t.page)||1,this.getContestList()},getContestList:function(){var t=this,e=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)-1)*this.limit;i.a.getContestList(e,this.limit,this.query).then(function(e){t.contests=e.data.data.results,t.total=e.data.data.total})},changeRoute:function(){var t=r()({},this.query);t.page=this.page,this.$router.push({name:"contest-list",query:l.a.filterEmptyValue(t)})},onRuleChange:function(t){this.query.rule_type=t,this.page=1,this.changeRoute()},onStatusChange:function(t){this.query.status=t,this.page=1,this.changeRoute()},goContest:function(t){this.cur_contest_id=t.id,t.contest_type===h.c.PUBLIC||this.isAuthenticated?this.$router.push({name:"contest-details",params:{contestID:t.id}}):(this.$error("Please login first."),this.$store.dispatch("changeModalStatus",{visible:!0}))},getDuration:function(t,e){return d.a.duration(t,e)}},computed:o()({},Object(c.c)(["isAuthenticated","user"])),watch:{$route:function(t,e){t!==e&&this.init()}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Row",{attrs:{type:"flex"}},[n("Col",{attrs:{span:24}},[n("Panel",{attrs:{id:"contest-card",shadow:""}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"md-text",size:"30"}}),t._v("\n      实验内容/比赛\n    ")],1),t._v(" "),n("div",{attrs:{slot:"extra"},slot:"extra"},[n("ul",{staticClass:"filter"},[n("li",[n("Dropdown",{on:{"on-click":t.onRuleChange}},[n("span",[t._v(t._s(""===t.query.rule_type?"Rule":t.query.rule_type)+"\n              "),n("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),n("Dropdown-menu",{attrs:{slot:"list"},slot:"list"},[n("Dropdown-item",{attrs:{name:""}},[t._v("All")]),t._v(" "),n("Dropdown-item",{attrs:{name:"OI"}},[t._v("OI")]),t._v(" "),n("Dropdown-item",{attrs:{name:"ACM"}},[t._v("ACM")])],1)],1)],1),t._v(" "),n("li",[n("Dropdown",{on:{"on-click":t.onStatusChange}},[n("span",[t._v(t._s(""===t.query.status?"Status":t.CONTEST_STATUS_REVERSE[t.query.status].name)+"\n              "),n("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),n("Dropdown-menu",{attrs:{slot:"list"},slot:"list"},[n("Dropdown-item",{attrs:{name:""}},[t._v("All")]),t._v(" "),n("Dropdown-item",{attrs:{name:"0"}},[t._v("UnderWay")]),t._v(" "),n("Dropdown-item",{attrs:{name:"1"}},[t._v("Not Started")]),t._v(" "),n("Dropdown-item",{attrs:{name:"-1"}},[t._v("Ended")])],1)],1)],1),t._v(" "),n("li",[n("Input",{attrs:{id:"keyword",icon:"ios-search-strong",placeholder:"Keyword"},on:{"on-enter":t.changeRoute,"on-click":t.changeRoute},model:{value:t.query.keyword,callback:function(e){t.$set(t.query,"keyword",e)},expression:"query.keyword"}})],1)])]),t._v(" "),0==t.contests.length?n("p",{attrs:{id:"no-contest"}},[t._v("No contest")]):t._e(),t._v(" "),n("ol",{attrs:{id:"contest-list"}},t._l(t.contests,function(e){return n("li",{key:e.title},[n("Row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("Icon",{attrs:{type:"logo-steam"}}),t._v(" "),n("Col",{staticClass:"contest-main",attrs:{span:18}},[n("p",{staticClass:"title"},[n("a",{staticClass:"entry",on:{click:function(n){n.stopPropagation(),t.goContest(e)}}},[t._v("\n              "+t._s(e.title)+"\n            ")]),t._v(" "),"Public"!=e.contest_type?[n("Icon",{attrs:{type:"ios-locked-outline",size:"20"}})]:t._e()],2),t._v(" "),n("ul",{staticClass:"detail"},[n("li",[n("Icon",{attrs:{type:"calendar",color:"#3091f2"}}),t._v("\n              "+t._s(t._f("localtime")(e.start_time,"YYYY-M-D HH:mm"))+"\n            ")],1),t._v(" "),n("li",[n("Icon",{attrs:{type:"android-time",color:"#3091f2"}}),t._v("\n              "+t._s(t.getDuration(e.start_time,e.end_time))+"\n            ")],1),t._v(" "),n("li",[n("Button",{attrs:{size:"small",shape:"circle"},on:{click:function(n){t.onRuleChange(e.rule_type)}}},[t._v("\n                "+t._s(e.rule_type)+"\n              ")])],1)])]),t._v(" "),n("Col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[n("Tag",{attrs:{type:"dot",color:t.CONTEST_STATUS_REVERSE[e.status].color}},[t._v(t._s(t.CONTEST_STATUS_REVERSE[e.status].name))])],1)],1)],1)}),0)]),t._v(" "),n("Pagination",{attrs:{total:t.total,pageSize:t.limit,current:t.page},on:{"on-change":t.getContestList,"update:current":function(e){t.page=e}}})],1)],1)},staticRenderFns:[]};var p=n("VU/8")(m,f,!1,function(t){n("llfq")},"data-v-67c4f92c",null);e.default=p.exports},"0WDu":function(t,e){},"4dQa":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Dd8w"),o=n.n(s),a=n("PJh5"),r=n.n(a),i=n("8Q2T"),c=n("NYxO"),l=n("IcnI"),u=n("FN8c"),d=n("2hfY"),h={name:"ContestDetail",components:{},data:function(){return{CONTEST_STATUS:u.a,route_name:"",btnLoading:!1,contestID:"",contestPassword:"",columns:[{title:"StartAt",render:function(t,e){return t("span",d.a.utcToLocal(e.row.start_time))}},{title:"EndAt",render:function(t,e){return t("span",d.a.utcToLocal(e.row.end_time))}},{title:"ContestType",key:"contest_type"},{title:"Rule",key:"rule_type"},{title:"Creator",render:function(t,e){return t("span",e.row.created_by.username)}}]}},mounted:function(){var t=this;this.contestID=this.$route.params.contestID,this.route_name=this.$route.name,this.$store.dispatch("getContest").then(function(e){t.changeDomTitle({title:e.data.data.title});var n=e.data.data;r()(n.end_time).isAfter(r()(n.now))&&(t.timer=setInterval(function(){t.$store.commit(l.b.NOW_ADD_1S)},1e3))})},methods:o()({},Object(c.b)(["changeDomTitle"]),{handleRoute:function(t){this.$router.push(t)},checkPassword:function(){var t=this;""!==this.contestPassword?(this.btnLoading=!0,i.a.checkContestPassword(this.contestID,this.contestPassword).then(function(e){t.$success("Succeeded"),t.$store.commit(l.b.CONTEST_ACCESS,{access:!0}),t.btnLoading=!1},function(e){t.btnLoading=!1})):this.$error("Password can't be empty")}}),computed:o()({},Object(c.d)({showMenu:function(t){return t.contest.itemVisible.menu},contest:function(t){return t.contest.contest},contest_table:function(t){return[t.contest.contest]},now:function(t){return t.contest.now}}),Object(c.c)(["contestMenuDisabled","contestRuleType","contestStatus","countdown","isContestAdmin","OIContestRealTimePermission","passwordFormVisible"]),{countdownColor:function(){if(this.contestStatus)return u.b[this.contestStatus].color},showAdminHelper:function(){return this.isContestAdmin&&"ACM"===this.contestRuleType}}),watch:{$route:function(t){this.route_name=t.name,this.contestID=t.params.contestID,this.changeDomTitle({title:this.contest.title})}},beforeDestroy:function(){clearInterval(this.timer),this.$store.commit(l.b.CLEAR_CONTEST)}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-container"},[n("div",{attrs:{id:"contest-main"}},[n("transition",{attrs:{name:"fadeInUp"}},[n("router-view")],1),t._v(" "),"contest-details"===t.route_name?n("div",{staticClass:"flex-container"},[[n("div",{attrs:{id:"contest-desc"}},[n("Panel",{attrs:{padding:20,shadow:""}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n              "+t._s(t.contest.title)+"\n            ")]),t._v(" "),n("div",{attrs:{slot:"extra"},slot:"extra"},[n("Tag",{attrs:{type:"dot",color:t.countdownColor}},[n("span",{attrs:{id:"countdown"}},[t._v(t._s(t.countdown))])])],1),t._v(" "),n("div",{staticClass:"markdown-body",domProps:{innerHTML:t._s(t.contest.description)}}),t._v(" "),t.passwordFormVisible?n("div",{staticClass:"contest-password"},[n("Input",{staticClass:"contest-password-input",attrs:{type:"password",placeholder:"contest password"},on:{"on-enter":t.checkPassword},model:{value:t.contestPassword,callback:function(e){t.contestPassword=e},expression:"contestPassword"}}),t._v(" "),n("Button",{attrs:{type:"info"},on:{click:t.checkPassword}},[t._v("Enter")])],1):t._e()]),t._v(" "),n("Table",{staticStyle:{"margin-bottom":"40px"},attrs:{columns:t.columns,data:t.contest_table,"disabled-hover":""}})],1)]],2):t._e()],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showMenu,expression:"showMenu"}],attrs:{id:"contest-menu"}},[n("VerticalMenu",{on:{"on-click":t.handleRoute}},[n("VerticalMenu-item",{attrs:{route:{name:"contest-details",params:{contestID:t.contestID}}}},[n("Icon",{attrs:{type:"ios-home"}}),t._v("\n        "+t._s(t.$t("m.Overview"))+"\n      ")],1),t._v(" "),n("VerticalMenu-item",{attrs:{disabled:t.contestMenuDisabled,route:{name:"contest-problem-list",params:{contestID:t.contestID}}}},[n("Icon",{attrs:{type:"ios-photos"}}),t._v("\n        "+t._s(t.$t("m.Problems"))+"\n      ")],1),t._v(" "),t.OIContestRealTimePermission?n("VerticalMenu-item",{attrs:{disabled:t.contestMenuDisabled,route:{name:"contest-submission-list"}}},[n("Icon",{attrs:{type:"md-pulse"}}),t._v("\n        "+t._s(t.$t("m.Submissions"))+"\n      ")],1):t._e(),t._v(" "),t.OIContestRealTimePermission?n("VerticalMenu-item",{attrs:{disabled:t.contestMenuDisabled,route:{name:"contest-rank",params:{contestID:t.contestID}}}},[n("Icon",{attrs:{type:"md-podium"}}),t._v("\n        "+t._s(t.$t("m.Rankings"))+"\n      ")],1):t._e(),t._v(" "),t.showAdminHelper?n("VerticalMenu-item",{attrs:{route:{name:"acm-helper",params:{contestID:t.contestID}}}},[n("Icon",{attrs:{type:"ios-paw"}}),t._v("\n        "+t._s(t.$t("m.Admin_Helper"))+"\n      ")],1):t._e()],1)],1)])},staticRenderFns:[]};var f=n("VU/8")(h,m,!1,function(t){n("Gxy6")},"data-v-11d46d78",null);e.default=f.exports},"5PlU":function(t,e,n){var s=n("RY/4"),o=n("dSzd")("iterator"),a=n("/bQp");t.exports=n("FeBl").isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||a.hasOwnProperty(s(e))}},"95TO":function(t,e,n){"use strict";var s=n("I95x"),o=n.n(s),a={name:"hamburger",props:{width:{type:Number,default:22},height:{type:Number,default:22},color:{type:String,default:"#5A5E66"}},data:function(){return{isFullscreen:!1}},methods:{click:function(){if(!o.a.enabled)return this.$warning("Your browser doesn't support fullscreen"),!1;o.a.toggle()}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticClass:"icon screenfull",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",t:"1497503607356",viewBox:"0 0 1024 1024",version:"1.1","p-id":"4109",fill:this.color,width:this.width,height:this.height},on:{click:this.click}},[e("path",{attrs:{d:"M604.157933 512l204.484208 204.484208 82.942037-82.942037c10.364045-10.952446 26.498514-13.83817 40.309054-8.067746 13.249769 5.742794 22.465664 18.99154 22.465664 33.977859l0 258.042008c0 20.168342-16.695241 36.863582-36.863582 36.863582L659.452283 954.357873c-14.986319 0-28.236088-9.215896-33.977859-23.025413-5.770424-13.249769-2.885723-29.384237 8.067746-39.748283l82.942037-82.942037L512 604.157933 307.515792 808.642141l82.942037 82.942037c10.952446 10.364045 13.83817 26.498514 8.067746 39.748283-5.742794 13.809517-18.99154 23.025413-33.977859 23.025413L106.504686 954.357873c-20.168342 0-36.863582-16.695241-36.863582-36.863582L69.641103 659.452283c0-14.986319 9.215896-28.236088 23.025413-33.977859 13.249769-5.770424 29.384237-2.8847 39.748283 8.067746l82.942037 82.942037 204.484208-204.484208L215.357859 307.515792l-82.942037 82.942037c-6.890944 6.918573-16.10684 10.952446-25.911136 10.952446-4.593622 0-9.804297-1.14815-13.83817-2.8847-13.809517-5.742794-23.025413-18.99154-23.025413-33.977859L69.641103 106.504686c0-20.168342 16.695241-36.863582 36.863582-36.863582L364.546693 69.641103c14.986319 0 28.236088 9.215896 33.977859 23.025413 5.770424 13.249769 2.8847 29.384237-8.067746 39.748283l-82.942037 82.942037 204.484208 204.484208L716.484208 215.357859l-82.942037-82.942037c-10.952446-10.364045-13.83817-26.498514-8.067746-39.748283 5.742794-13.809517 18.99154-23.025413 33.977859-23.025413l258.042008 0c20.168342 0 36.863582 16.695241 36.863582 36.863582l0 258.042008c0 14.986319-9.215896 28.236088-22.465664 33.977859-4.593622 1.736551-9.804297 2.8847-14.397918 2.8847-9.804297 0-19.020192-4.033873-25.911136-10.952446l-82.942037-82.942037L604.157933 512z","p-id":"4110"}})])},staticRenderFns:[]};var i=n("VU/8")(a,r,!1,function(t){n("Qvfe")},"data-v-903135cc",null);e.a=i.exports},BoGV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Dd8w"),o=n.n(s),a=n("NYxO"),r={name:"ContestProblemList",mixins:[n("y2MC").b],data:function(){var t=this;return{ACMTableColumns:[{title:"#",key:"_id",sortType:"asc",width:150},{title:"Title",key:"title"},{title:"Total",key:"submission_number"},{title:"AC Rate",render:function(e,n){return e("span",t.getACRate(n.row.accepted_number,n.row.submission_number))}}],OITableColumns:[{title:"#",key:"_id",width:150},{title:"Title",key:"title"}]}},mounted:function(){this.getContestProblems()},methods:{getContestProblems:function(){var t=this;this.$store.dispatch("getContestProblems").then(function(e){t.isAuthenticated&&("ACM"===t.contestRuleType?t.addStatusColumn(t.ACMTableColumns,e.data.data):t.OIContestRealTimePermission&&t.addStatusColumn(t.ACMTableColumns,e.data.data))})},goContestProblem:function(t){this.$router.push({name:"contest-problem-details",params:{contestID:this.$route.params.contestID,problemID:t._id}})}},computed:o()({},Object(a.d)({problems:function(t){return t.contest.contestProblems}}),Object(a.c)(["isAuthenticated","contestRuleType","OIContestRealTimePermission"]))},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Panel",[n("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("m.Problems_List")))]),t._v(" "),"ACM"==t.contestRuleType||t.OIContestRealTimePermission?n("Table",{attrs:{columns:t.ACMTableColumns,data:t.problems,"no-data-text":"No Problems"},on:{"on-row-click":t.goContestProblem}}):n("Table",{attrs:{data:t.problems,columns:t.OITableColumns,"no-data-text":"No Problems"},on:{"on-row-click":t.goContestProblem}})],1)],1)},staticRenderFns:[]};var c=n("VU/8")(r,i,!1,function(t){n("vnqi")},"data-v-5d6fff0f",null);e.default=c.exports},Gxy6:function(t,e){},I95x:function(t,e){
/*!
* screenfull
* v3.3.3 - 2018-09-04
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=void 0!==t&&t.exports,s="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,o=function(){for(var t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],s=0,o=n.length,a={};s<o;s++)if((t=n[s])&&t[1]in e){for(s=0;s<t.length;s++)a[n[0][s]]=t[s];return a}return!1}(),a={change:o.fullscreenchange,error:o.fullscreenerror},r={request:function(t){var n=o.requestFullscreen;t=t||e.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?t[n]():t[n](s?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){e[o.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,n){var s=a[t];s&&e.addEventListener(s,n,!1)},off:function(t,n){var s=a[t];s&&e.removeEventListener(s,n,!1)},raw:o};o?(Object.defineProperties(r,{isFullscreen:{get:function(){return Boolean(e[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[o.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(e[o.fullscreenEnabled])}}}),n?t.exports=r:window.screenfull=r):n?t.exports=!1:window.screenfull=!1}()},"N/8R":function(t,e){},Qvfe:function(t,e){},RD8b:function(t,e){},Xd32:function(t,e,n){n("+tPU"),n("zQR9"),t.exports=n("5PlU")},d7EF:function(t,e,n){"use strict";e.__esModule=!0;var s=a(n("us/S")),o=a(n("BO1k"));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,s.default)(Object(t)))return function(t,e){var n=[],s=!0,a=!1,r=void 0;try{for(var i,c=(0,o.default)(t);!(s=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{!s&&c.return&&c.return()}finally{if(a)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},llfq:function(t,e){},"us/S":function(t,e,n){t.exports={default:n("Xd32"),__esModule:!0}},vi5v:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Dd8w"),o=n.n(s),a=n("NYxO"),r=n("IcnI"),i=n("mvHQ"),c=n.n(i),l=n("BO1k"),u=n.n(l),d=n("d7EF"),h=n.n(d),m=n("fZjL"),f=n.n(m),p=n("PJh5"),v=n.n(p),_=n("26Oo"),b=n("8Q2T"),g=n("95TO"),w=n("FN8c"),C={components:{ScreenFull:g.a},methods:{getContestRankData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=(e-1)*this.limit;this.showChart&&!n&&this.$refs.chart.showLoading({maskColor:"rgba(250, 250, 250, 0.8)"});var o={offset:s,limit:this.limit,contest_id:this.$route.params.contestID,force_refresh:this.forceUpdate?"1":"0"};b.a.getContestRank(o).then(function(s){t.showChart&&!n&&t.$refs.chart.hideLoading(),t.total=s.data.data.total,1===e&&t.applyToChart(s.data.data.results.slice(0,10)),t.applyToTable(s.data.data.results)})},handleAutoRefresh:function(t){var e=this;!0===t?this.refreshFunc=setInterval(function(){e.page=1,e.getContestRankData(1,!0)},1e4):clearInterval(this.refreshFunc)}},computed:o()({},Object(a.c)(["isContestAdmin"]),Object(a.d)({contest:function(t){return t.contest.contest},contestProblems:function(t){return t.contest.contestProblems}}),{showChart:{get:function(){return this.$store.state.contest.itemVisible.chart},set:function(t){this.$store.commit(r.b.CHANGE_CONTEST_ITEM_VISIBLE,{chart:t})}},showMenu:{get:function(){return this.$store.state.contest.itemVisible.menu},set:function(t){var e=this;this.$store.commit(r.b.CHANGE_CONTEST_ITEM_VISIBLE,{menu:t}),this.$nextTick(function(){e.showChart&&e.$refs.chart.resize(),e.$refs.tableRank.handleResize()})}},showRealName:{get:function(){return this.$store.state.contest.itemVisible.realName},set:function(t){this.$store.commit(r.b.CHANGE_CONTEST_ITEM_VISIBLE,{realName:t}),t?this.columns.splice(2,0,{title:"RealName",align:"center",width:"150px",render:function(t,e){return t("span",e.row.user.real_name)}}):this.columns.splice(2,1)}},forceUpdate:{get:function(){return this.$store.state.contest.forceUpdate},set:function(t){this.$store.commit(r.b.CHANGE_RANK_FORCE_UPDATE,{value:t})}},limit:{get:function(){return this.$store.state.contest.rankLimit},set:function(t){this.$store.commit(r.b.CHANGE_CONTEST_RANK_LIMIT,{rankLimit:t})}},refreshDisabled:function(){return this.contest.status===w.a.ENDED}}),beforeDestroy:function(){clearInterval(this.refreshFunc)}},y=n("2hfY"),k=n("oAV5"),T={name:"acm-contest-rank",components:{Pagination:_.a},mixins:[C],data:function(){var t=this;return{total:0,page:1,contestID:"",columns:[{align:"center",width:60,render:function(e,n){return e("span",{},n.index+(t.page-1)*t.limit+1)}},{title:"User",align:"center",render:function(e,n){return e("a",{style:{display:"inline-block","max-width":"150px"},on:{click:function(){t.$router.push({name:"user-home",query:{username:n.row.user.username}})}}},n.row.user.username)}},{title:"AC / Total",align:"center",width:100,render:function(e,n){return e("span",{},[e("span",{},n.row.accepted_number+" / "),e("a",{on:{click:function(){t.$router.push({name:"contest-submission-list",query:{username:n.row.user.username}})}}},n.row.submission_number)])}},{title:"TotalTime",align:"center",render:function(e,n){return e("span",t.parseTotalTime(n.row.total_time))}}],dataRank:[],options:{title:{text:"Top 10 Teams",left:"center"},dataZoom:[{type:"inside",filterMode:"none",xAxisIndex:[0],start:0,end:100}],toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"save as image"}},right:"5%"},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x"}},legend:{orient:"vertical",y:"center",right:0,data:[],formatter:function(t){return k.a.breakLongWords(t,16)},textStyle:{fontSize:12}},grid:{x:80,x2:200},xAxis:[{type:"time",splitLine:!1,axisPointer:{show:!0,snap:!0}}],yAxis:[{type:"category",boundaryGap:!1,data:[0]}],series:[]}}},mounted:function(){var t=this;this.contestID=this.$route.params.contestID,this.getContestRankData(1),0===this.contestProblems.length?this.getContestProblems().then(function(e){t.addTableColumns(e.data.data),t.addChartCategory(e.data.data)}):(this.addTableColumns(this.contestProblems),this.addChartCategory(this.contestProblems))},methods:o()({},Object(a.b)(["getContestProblems"]),{addChartCategory:function(t){for(var e=[],n=0;n<=t.length;++n)e.push(n);this.options.yAxis[0].data=e},applyToChart:function(t){var e=this,n=[],s=[];t.forEach(function(t){n.push(t.user.username);var o=t.submission_info,a=[];f()(o).forEach(function(t){o[t].is_ac&&a.push(o[t].ac_time)}),a.sort(function(t,e){return t-e});var r=[];r.push([e.contest.start_time,0]);var i=!0,c=!1,l=void 0;try{for(var d,m=u()(a.entries());!(i=(d=m.next()).done);i=!0){var p=d.value,_=h()(p,2),b=_[0],g=_[1],w=v()(e.contest.start_time).add(g,"seconds").format();r.push([w,b+1])}}catch(t){c=!0,l=t}finally{try{!i&&m.return&&m.return()}finally{if(c)throw l}}s.push({name:t.user.username,type:"line",data:r})}),this.options.legend.data=n,this.options.series=s},applyToTable:function(t){var e=JSON.parse(c()(t));e.forEach(function(t,n){var s=t.submission_info,o={};f()(s).forEach(function(t){e[n][t]=s[t],e[n][t].ac_time=y.a.secondFormat(e[n][t].ac_time);var a=s[t];a.is_first_ac?o[t]="first-ac":a.is_ac?o[t]="ac":o[t]="wa"}),e[n].cellClassName=o}),this.dataRank=e},addTableColumns:function(t){var e=this;t.forEach(function(t){e.columns.push({align:"center",key:t.id,renderHeader:function(n,s){return n("a",{class:{emphasis:!0},on:{click:function(){e.$router.push({name:"contest-problem-details",params:{contestID:e.contestID,problemID:t._id}})}}},t._id)},render:function(e,n){if(n.row[t.id]){var s=n.row[t.id],o=void 0,a=void 0;return s.is_ac&&(o=e("span",s.ac_time)),0!==s.error_number&&(a=e("p","(-"+s.error_number+")")),e("div",[o,a])}}})})},parseTotalTime:function(t){var e=v.a.duration(t,"s");return[Math.floor(e.asHours()),e.minutes(),e.seconds()].join(":")},downloadRankCSV:function(){k.a.downloadFile("contest_rank?download_csv=1&contest_id="+this.$route.params.contestID+"&force_refrash="+(this.forceUpdate?"1":"0"))}})},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Panel",{attrs:{shadow:""}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.contest.title))]),t._v(" "),n("div",{attrs:{slot:"extra"},slot:"extra"},[n("screen-full",{staticClass:"screen-full",attrs:{height:18,width:18}}),t._v(" "),n("Poptip",{attrs:{trigger:"hover",placement:"left-start"}},[n("Icon",{attrs:{type:"android-settings",size:"20"}}),t._v(" "),n("div",{attrs:{slot:"content",id:"switches"},slot:"content"},[n("p",[n("span",[t._v("Menu")]),t._v(" "),n("i-switch",{model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}}),t._v(" "),n("span",[t._v("Chart")]),t._v(" "),n("i-switch",{model:{value:t.showChart,callback:function(e){t.showChart=e},expression:"showChart"}})],1),t._v(" "),n("p",[n("span",[t._v("Auto Refresh(10s)")]),t._v(" "),n("i-switch",{attrs:{disabled:t.refreshDisabled},on:{"on-change":t.handleAutoRefresh}})],1),t._v(" "),t.isContestAdmin?[n("p",[n("span",[t._v("RealName")]),t._v(" "),n("i-switch",{model:{value:t.showRealName,callback:function(e){t.showRealName=e},expression:"showRealName"}})],1),t._v(" "),n("p",[n("span",[t._v("Force Update")]),t._v(" "),n("i-switch",{attrs:{disabled:t.refreshDisabled},model:{value:t.forceUpdate,callback:function(e){t.forceUpdate=e},expression:"forceUpdate"}})],1)]:t._e(),t._v(" "),[n("Button",{attrs:{type:"primary",size:"small"},on:{click:t.downloadRankCSV}},[t._v("download csv")])]],2)],1)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showChart,expression:"showChart"}],staticClass:"echarts"},[n("ECharts",{ref:"chart",attrs:{options:t.options,"auto-resize":""}})],1),t._v(" "),n("Table",{ref:"tableRank",staticClass:"auto-resize",attrs:{columns:t.columns,data:t.dataRank,"disabled-hover":""}}),t._v(" "),n("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.page,"show-sizer":""},on:{"update:pageSize":function(e){t.limit=e},"update:current":function(e){t.page=e},"on-change":t.getContestRankData,"on-page-size-change":function(e){t.getContestRankData(1)}}})],1)},staticRenderFns:[]};var x=n("VU/8")(T,I,!1,function(t){n("RD8b")},"data-v-99b6f40c",null).exports,R={name:"acm-contest-rank",components:{Pagination:_.a},mixins:[C],data:function(){var t=this;return{total:0,page:1,contestID:"",columns:[{align:"center",width:60,render:function(e,n){return e("span",{},n.index+(t.page-1)*t.limit+1)}},{title:"User",align:"center",render:function(e,n){return e("a",{style:{display:"inline-block","max-width":"150px"},on:{click:function(){t.$router.push({name:"user-home",query:{username:n.row.user.username}})}}},n.row.user.username)}},{title:"Total Score",align:"center",render:function(e,n){return e("a",{on:{click:function(){t.$router.push({name:"contest-submission-list",query:{username:n.row.user.username}})}}},n.row.total_score)}}],dataRank:[],options:{title:{text:"Top 10 Teams",left:"center"},tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["line","bar"]},saveAsImage:{show:!0}},right:"10%"},calculable:!0,xAxis:[{type:"category",data:["root"],boundaryGap:!0,axisLabel:{interval:0,showMinLabel:!0,showMaxLabel:!0,align:"center",formatter:function(t,e){return k.a.breakLongWords(t,14)}},axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"Score",type:"bar",barMaxWidth:"80",data:[0],markPoint:{data:[{type:"max",name:"max"}]}}]}}},mounted:function(){var t=this;this.contestID=this.$route.params.contestID,this.getContestRankData(1),0===this.contestProblems.length?this.getContestProblems().then(function(e){t.addTableColumns(e.data.data)}):this.addTableColumns(this.contestProblems)},methods:o()({},Object(a.b)(["getContestProblems"]),{applyToChart:function(t){var e=[],n=[];t.forEach(function(t){e.push(t.user.username),n.push(t.total_score)}),this.options.xAxis[0].data=e,this.options.series[0].data=n},applyToTable:function(t){var e=JSON.parse(c()(t));e.forEach(function(t,n){var s=t.submission_info;f()(s).forEach(function(t){e[n][t]=s[t]})}),this.dataRank=e},addTableColumns:function(t){var e=this;t.forEach(function(t){e.columns.push({align:"center",key:t.id,renderHeader:function(n,s){return n("a",{class:{emphasis:!0},on:{click:function(){e.$router.push({name:"contest-problem-details",params:{contestID:e.contestID,problemID:t._id}})}}},t._id)},render:function(e,n){return e("span",n.row[t.id])}})})},downloadRankCSV:function(){k.a.downloadFile("contest_rank?download_csv=1&contest_id="+this.$route.params.contestID+"&force_refrash="+(this.forceUpdate?"1":"0"))}})},D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Panel",{attrs:{shadow:""}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.contest.title))]),t._v(" "),n("div",{attrs:{slot:"extra"},slot:"extra"},[n("Poptip",{attrs:{trigger:"hover",placement:"left-start"}},[n("Icon",{attrs:{type:"md-settings",size:"20"}}),t._v(" "),n("div",{attrs:{slot:"content",id:"switches"},slot:"content"},[n("p",[n("span",[t._v("Menu")]),t._v(" "),n("i-switch",{model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}}),t._v(" "),n("span",[t._v("Chart")]),t._v(" "),n("i-switch",{model:{value:t.showChart,callback:function(e){t.showChart=e},expression:"showChart"}})],1),t._v(" "),n("p",[n("span",[t._v("Auto Refresh(10s)")]),t._v(" "),n("i-switch",{attrs:{disabled:t.refreshDisabled},on:{"on-change":t.handleAutoRefresh}})],1),t._v(" "),t.isContestAdmin?n("p",[n("span",[t._v("RealName")]),t._v(" "),n("i-switch",{model:{value:t.showRealName,callback:function(e){t.showRealName=e},expression:"showRealName"}})],1):t._e(),t._v(" "),n("p",[n("Button",{attrs:{type:"primary",size:"small"},on:{click:t.downloadRankCSV}},[t._v("download csv")])],1)])],1)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showChart,expression:"showChart"}],staticClass:"echarts"},[n("ECharts",{ref:"chart",attrs:{options:t.options,"auto-resize":""}})],1),t._v(" "),n("Table",{ref:"tableRank",staticClass:"auto-resize",attrs:{columns:t.columns,data:t.dataRank,"disabled-hover":""}}),t._v(" "),n("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.page,"show-sizer":""},on:{"update:pageSize":function(e){t.limit=e},"update:current":function(e){t.page=e},"on-change":t.getContestRankData,"on-page-size-change":function(e){t.getContestRankData(1)}}})],1)},staticRenderFns:[]};var E={name:"contest-rank",components:{ACMContestRank:x,OIContestRank:n("VU/8")(R,D,!1,function(t){n("0WDu")},"data-v-448538d4",null).exports,NullComponent:{name:"null-component",template:"<div></div>"}},computed:o()({},Object(a.c)(["contestRuleType"]),{currentView:function(){return null===this.contestRuleType?"NullComponent":"ACM"===this.contestRuleType?"ACMContestRank":"OIContestRank"}}),beforeRouteLeave:function(t,e,n){this.$store.commit(r.b.CHANGE_CONTEST_ITEM_VISIBLE,{menu:!0}),n()}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e(this.currentView,{tag:"component"})],1)},staticRenderFns:[]};var P=n("VU/8")(E,A,!1,function(t){n("N/8R")},"data-v-37117b76",null);e.default=P.exports},vnqi:function(t,e){},zVEN:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("BO1k"),o=n.n(s),a=n("Dd8w"),r=n.n(a),i=n("NYxO"),c=n("IcnI"),l=n("PJh5"),u=n.n(l),d=n("26Oo"),h=n("8Q2T"),m={name:"acm-helper",components:{Pagination:d.a},data:function(){var t=this;return{page:1,total:0,loadingTable:!1,columns:[{title:"AC Time",key:"ac_time"},{title:"ProblemID",align:"center",key:"problem_display_id"},{title:"First Blood",align:"center",render:function(t,e){return e.row.ac_info.is_first_ac?t("Tag",{props:{color:"red"}},"First Blood"):t("span","----")}},{title:"Username",align:"center",render:function(e,n){var s=n.row;return e("a",{style:{display:"inline-block","max-width":"150px"},on:{click:function(){t.$router.push({name:"contest-submission-list",query:{username:s.username}})}}},s.username)}},{title:"RealName",align:"center",render:function(t,e){return t("span",{style:{display:"inline-block","max-width":"150px"}},e.row.real_name)}},{title:"Status",align:"center",render:function(t,e){var n=e.row;return t("Tag",{props:{color:n.checked?"green":"yellow"}},n.checked?"Checked":"Not Checked")}},{title:"Option",fixed:"right",align:"center",width:100,render:function(e,n){var s=n.row;return e("Button",{props:{type:"ghost",size:"small",icon:"checkmark",disabled:s.checked},on:{click:function(){t.updateCheckedStatus(s)}}},"Check It")}}],acInfo:[],pagedAcInfo:[],problemsMap:[]}},mounted:function(){var t=this;this.contestID=this.$route.params.contestID,0===this.contestProblems.length?this.getContestProblems().then(function(e){t.mapProblemDisplayID(),t.getACInfo()}):(this.mapProblemDisplayID(),this.getACInfo())},methods:r()({},Object(i.b)(["getContestProblems"]),{mapProblemDisplayID:function(){var t={};this.contestProblems.forEach(function(e){t[e.id]=e._id}),this.problemsMap=t},getACInfo:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loadingTable=!0;var e={contest_id:this.$route.params.contestID};h.a.getACMACInfo(e).then(function(e){t.loadingTable=!1;var n=e.data.data;t.total=n.length,t.acInfo=n,t.handlePage()}).catch(function(){t.loadingTable=!1})},updateCheckedStatus:function(t){var e=this,n={rank_id:t.id,contest_id:this.contestID,problem_id:t.problem_id,checked:!0};h.a.updateACInfoCheckedStatus(n).then(function(t){e.$success("Succeeded"),e.getACInfo()}).catch(function(){})},handleAutoRefresh:function(t){var e=this;t?this.refreshFunc=setInterval(function(){e.page=1,e.getACInfo()},1e4):clearInterval(this.refreshFunc)},handlePage:function(){1!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)&&(this.loadingTable=!0);var t=this.acInfo.slice((this.page-1)*this.limit,this.page*this.limit),e=!0,n=!1,s=void 0;try{for(var a,r=o()(t);!(e=(a=r.next()).done);e=!0){var i=a.value;i.init||(i.init=!0,i.problem_display_id=this.problemsMap[i.problem_id],i.ac_time=u()(this.contest.start_time).add(i.ac_info.ac_time,"seconds").local().format("YYYY-M-D  HH:mm:ss"))}}catch(t){n=!0,s=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw s}}this.pagedAcInfo=t,this.loadingTable=!1}}),computed:r()({},Object(i.d)({contest:function(t){return t.contest.contest},contestProblems:function(t){return t.contest.contestProblems}}),{limit:{get:function(){return this.$store.state.contest.rankLimit},set:function(t){this.$store.commit(c.b.CHANGE_CONTEST_RANK_LIMIT,{rankLimit:t})}}}),beforeDestroy:function(){clearInterval(this.refreshFunc)}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("panel",{attrs:{shadow:""}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("ACM Helper")]),t._v(" "),n("div",{attrs:{slot:"extra"},slot:"extra"},[n("ul",{staticClass:"filter"},[n("li",[t._v("\n        Auto Refresh(10s)\n        "),n("i-switch",{staticStyle:{"margin-left":"5px"},on:{"on-change":t.handleAutoRefresh}})],1),t._v(" "),n("li",[n("Button",{attrs:{type:"info"},on:{click:t.getACInfo}},[t._v("Refresh")])],1)])]),t._v(" "),n("Table",{attrs:{data:t.pagedAcInfo,columns:t.columns,loading:t.loadingTable,"disabled-hover":""}}),t._v(" "),n("pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.page,"show-sizer":""},on:{"update:pageSize":function(e){t.limit=e},"update:current":function(e){t.page=e},"on-change":t.handlePage,"on-page-size-change":function(e){t.handlePage(1)}}})],1)},staticRenderFns:[]};var p=n("VU/8")(m,f,!1,function(t){n("+3F9")},"data-v-c609983e",null);e.default=p.exports}});